#!/bin/bash

#
# tools/mkversion: given the contents of the "version" file on stdin, emit a C
# file on stdout that defines appropriate values for the version major, minor,
# and micro numbers.  Lines beginning with '#' are ignored in the input.  Only
# the first non-ignored line will be used.
#

awk -F. '!/^#/{ print $1, $2, $3 }' | head -1 | while read major minor micro; do
cat <<-EOF
/*
 * This file was generated by $0 at $(date).
 */
int mdbv8_vers_major = $major;
int mdbv8_vers_minor = $minor;
int mdbv8_vers_micro = $micro;
EOF
done
